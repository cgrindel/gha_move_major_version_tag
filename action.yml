name: 'Move a Major Version Tag'
description: 'Move a major version tag (e.g. v1) after a release.'

inputs:
  release_tag:
    required: true
    type: string

runs:
  using: composite
  steps:
    - name: Move the major version tag
      shell: bash
      env:
        RELEASE_TAG: ${{ inputs.release_tag }}
      run: |
        # DEBUG BEGIN
        set -x
        # DEBUG END
        bazelisk run //:move_major_version_tag -- \
          --release_tag "${RELEASE_TAG}" \
          --repo_dir "${PWD}"
